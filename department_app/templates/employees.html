{% extends "content_base.html" %}

{% block title %}
    Departments
{% endblock %}

{% block content %}
    <div class="container">
        <div class="mt-3 my-5">
            <h1>Employees</h1>

            <p class="fs-5">
                {% if employees|length > 0 %}
                There are a total of {{ employees|length }} employees working in {{ department_count }} departments.
                {% else %}
                There are no employees.
                {% endif %}
            </p>
            <a type="button" class="btn btn-success btn-lg" role="button" href="{{ url_for("web_app.employee_add") }}">
                <i class="bi bi-plus-lg" ></i> Add
            </a>
        </div>

        {% for employee in employees %}
            {% include "employee.html" %}
        {% endfor %}

    </div>


    <div class="modal fade py-5" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <input type="hidden" name="deleteId" value="1" id="formDeleteId">
          <div class="modal-dialog">
            <div class="modal-content rounded-4 shadow">
              <div class="modal-body p-4 text-center">
                  <h5 class="mb-0">Delete <span id="modalDeleteName"></span>?</h5>
              </div>

              <div class="modal-footer flex-nowrap p-0">
                  <button type="button" class="btn btn-lg btn-link fs-6 text-decoration-none col-6 m-0 rounded-0 link-dark" data-bs-dismiss="modal">Cancel</button>
                  <a role="button" class="btn btn-lg btn-danger fs-6 text-decoration-none col-6 m-0 rounded-0" id="deleteAnchor">Delete</a>
              </div>
            </div>
          </div>
    </div>



    <script type="text/javascript">
        const deleteModal = document.getElementById('deleteModal');
        deleteModal.addEventListener('show.bs.modal', function (event) {
            const button = event.relatedTarget;
            const deleteValue = button.getAttribute('data-bs-deleteValue');
            const deleteName = button.getAttribute('data-bs-deleteName');

            const modalDeleteName = deleteModal.querySelector('#modalDeleteName');
            const modalDeleteId = deleteModal.querySelector('#deleteAnchor');


            modalDeleteName.textContent = deleteName
            modalDeleteId.href = deleteValue

        })
    </script>


{% endblock %}